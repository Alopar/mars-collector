# Mars Collector - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéÆ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è
–ü–æ—à–∞–≥–æ–≤–∞—è –∏–≥—Ä–∞ –æ–± —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–ª–æ–Ω–∏–µ–π –Ω–∞ –ú–∞—Ä—Å–µ —á–µ—Ä–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ—Ä–∞–±–ª–µ–π —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏.

## üìä –†–µ—Å—É—Ä—Å—ã = –®–∫–∞–ª—ã
–¢—Ä–∏ —Ç–∏–ø–∞ —Ä–µ—Å—É—Ä—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —à–∫–∞–ª–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–ª–æ–Ω–∏–∏:

1. **–û—Ä—É–∂–∏–µ (Weapons)** - –∑–∞—â–∏—Ç–∞ –æ—Ç –º–∞—Ä—Å–∏–∞–Ω –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞
2. **–ü—Ä–∏–ø–∞—Å—ã (Supplies)** - –µ–¥–∞, –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç—ã, —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏
3. **–õ—é–¥–∏ (People)** - –Ω–∞—Å–µ–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∏–∏

**–î–∏–∞–ø–∞–∑–æ–Ω —à–∫–∞–ª:** 0-100
- **<= 0** = –ü–†–û–ò–ì–†–´–® (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –Ω–µ—Ö–≤–∞—Ç–∫–∞)
- **>= 100** = –ü–†–û–ò–ì–†–´–® (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∏–∑–±—ã—Ç–æ–∫)

## üéØ –¶–µ–ª—å –∏–≥—Ä—ã
–ü—Ä–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –∑–∞–¥–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–æ–¥–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ)

## üîÑ –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª

### –§–∞–∑–∞ 1: –ó–∞–≥—Ä—É–∑–∫–∞ (Loading)
- –ò–≥—Ä–æ–∫ –≤–∏–¥–∏—Ç —Ç–µ–∫—É—â–∏–µ —à–∫–∞–ª—ã –∫–æ–ª–æ–Ω–∏–∏
- **–í–ê–ñ–ù–û:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —Ö–æ–¥—É
- –ò–≥—Ä–æ–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≥—Ä—É–∑ –∫–æ—Ä–∞–±–ª—è (–æ–±—â–∞—è –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä 10)
- –ú–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –ª—é–±—É—é –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Ä–µ—Å—É—Ä—Å–æ–≤

### –§–∞–∑–∞ 2: –û—Ç–ø—Ä–∞–≤–∫–∞ (Traveling)
- –ö–æ—Ä–∞–±–ª—å –ª–µ—Ç–∏—Ç –Ω–∞ –ú–∞—Ä—Å (–∞–Ω–∏–º–∞—Ü–∏—è/—Ç–∞–π–º–µ—Ä)
- UI –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω

### –§–∞–∑–∞ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ (Processing)
1. –î–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ —à–∫–∞–ª–∞–º
2. –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ–±—ã—Ç–∏–µ (–∏–∑ JSON-–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
3. –ò–∑ —à–∫–∞–ª –≤—ã—á–∏—Ç–∞—é—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Å–æ–±—ã—Ç–∏—é
4. **–õ—é–¥–∏ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç —Ä–µ—Å—É—Ä—Å—ã** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ)
   - –ö–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ —Ç—Ä–∞—Ç–∏—Ç –æ—Ä—É–∂–∏–µ –∏ –ø—Ä–∏–ø–∞—Å—ã
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `WeaponsPerPerson` –∏ `SuppliesPerPerson`
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –ø—Ä–æ–∏–≥—Ä—ã—à–∞/–ø–æ–±–µ–¥—ã
6. –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ö–æ–¥—É

### –§–∞–∑–∞ 4: –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã (GameOver)
- –ü–æ–±–µ–¥–∞: –µ—Å–ª–∏ –ø—Ä–æ–¥–µ—Ä–∂–∞–ª–∏—Å—å N —Ö–æ–¥–æ–≤
- –ü–æ—Ä–∞–∂–µ–Ω–∏–µ: –µ—Å–ª–∏ –ª—é–±–∞—è —à–∫–∞–ª–∞ –≤—ã—à–ª–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã [0, 100]

## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

### Models (–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö)
```
ResourceType.cs - –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
ShipCargo.cs - –≥—Ä—É–∑ –∫–æ—Ä–∞–±–ª—è —Å –æ–±—â–µ–π –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é
MarsColonyState.cs - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —à–∫–∞–ª –∫–æ–ª–æ–Ω–∏–∏
TurnEvent.cs - —Å–æ–±—ã—Ç–∏–µ —Ö–æ–¥–∞ –∏–∑ JSON
GameState.cs - —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
GameConfig.cs - ScriptableObject —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

### Managers (–°–∏–Ω–≥–ª—Ç–æ–Ω—ã)
```
ShipManager - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∞–±–ª–µ–º –∏ –≥—Ä—É–∑–æ–º
MarsManager - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∫–∞–ª–∞–º–∏ + –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
EventManager - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –∏–∑ JSON
GameFlowManager - –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
```

## üìù –§–æ—Ä–º–∞—Ç JSON —Å–æ–±—ã—Ç–∏–π

```json
{
  "events": [
    {
      "id": "turn_1",
      "title": "–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è",
      "description": "–û–ø–∏—Å–∞–Ω–∏–µ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç",
      "resourceChanges": {
        "weapons": -2,
        "supplies": -3,
        "people": 0
      }
    }
  ]
}
```

## üé® –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI

### –ö–Ω–æ–ø–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤
```csharp
public void OnWeaponsButtonClick()
{
    ShipManager.Instance.LoadResource(ResourceType.Weapons, 1);
}
```

### –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
```csharp
public void OnLaunchButtonClick()
{
    ShipManager.Instance.LaunchShip();
}
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —à–∫–∞–ª
```csharp
void Start()
{
    MarsManager.Instance.OnColonyStateChanged += UpdateBars;
}

void UpdateBars(MarsColonyState state)
{
    weaponsBar.value = state.Weapons / 100f;
    suppliesBar.value = state.Supplies / 100f;
    peopleBar.value = state.People / 100f;
}
```

### –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π
```csharp
void Start()
{
    MarsManager.Instance.OnPreviewUpdated += ShowPreview;
}

void ShowPreview(Dictionary<ResourceType, int> changes)
{
    weaponsPreview.text = changes[ResourceType.Weapons].ToString();
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ –∑–Ω–∞–∫–æ–º: +5 –∏–ª–∏ -3
}
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞

1. Create ‚Üí Mars Collector ‚Üí Game Config
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
   - **Ship Capacity** - –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫–æ—Ä–∞–±–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
   - **Starting Weapons/Supplies/People** - —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —à–∫–∞–ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50)
   - **Weapons Per Person** - —Å–∫–æ–ª—å–∫–æ –æ—Ä—É–∂–∏—è –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç 1 —á–µ–ª–æ–≤–µ–∫ –∑–∞ —Ö–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.1)
   - **Supplies Per Person** - —Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–ø–∞—Å–æ–≤ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç 1 —á–µ–ª–æ–≤–µ–∫ –∑–∞ —Ö–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.2)
   - **Turns To Win** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–æ–¥–æ–≤ –¥–ª—è –ø–æ–±–µ–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20)
   - **Events Json** - —Å—Å—ã–ª–∫–∞ –Ω–∞ JSON —Ñ–∞–π–ª —Å —Å–æ–±—ã—Ç–∏—è–º–∏
3. –ù–∞–∑–Ω–∞—á—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥ –≤ GameFlowManager –Ω–∞ —Å—Ü–µ–Ω–µ

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è:
- –£ –≤–∞—Å 50 —á–µ–ª–æ–≤–µ–∫
- WeaponsPerPerson = 0.1
- SuppliesPerPerson = 0.2
- **–ó–∞ —Ö–æ–¥ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—Å—è:** –û—Ä—É–∂–∏–µ: 5, –ü—Ä–∏–ø–∞—Å—ã: 10

## üé≤ –£—Å–ª–æ–≤–∏—è –ø—Ä–æ–∏–≥—Ä—ã—à–∞

| –®–∫–∞–ª–∞ | <= 0 | >= 100 |
|-------|------|--------|
| Weapons | –ú–∞—Ä—Å–∏–∞–Ω–µ —É–Ω–∏—á—Ç–æ–∂–∏–ª–∏ –∫–æ–ª–æ–Ω–∏—é | –ú–∏–ª–∏—Ç–∞—Ä–∏–∑–∞—Ü–∏—è ‚Üí –†–µ–≤–æ–ª—é—Ü–∏—è |
| Supplies | –ì–æ–ª–æ–¥ ‚Üí –°–º–µ—Ä—Ç—å | –ì–µ–¥–æ–Ω–∏–∑–º ‚Üí –ö–æ–ª–ª–∞–ø—Å |
| People | –í—ã–º–∏—Ä–∞–Ω–∏–µ –Ω–∞—Å–µ–ª–µ–Ω–∏—è | –ü–µ—Ä–µ–Ω–∞—Å–µ–ª–µ–Ω–∏–µ ‚Üí –ö–æ–ª–ª–∞–ø—Å |

## üéØ API –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

### ShipManager
```csharp
LoadResource(ResourceType type, int amount = 1) -> bool
UnloadResource(ResourceType type, int amount = 1) -> bool
LaunchShip() -> void
GetResourceAmount(ResourceType type) -> int
GetAvailableSpace() -> int
CanAddResource(int amount = 1) -> bool

Events:
- OnResourceAdded(ResourceType, int)
- OnResourceRemoved(ResourceType, int)
- OnShipLaunched(ShipCargo)
- OnCargoChanged(int current, int max)
```

### MarsManager
```csharp
GetResourceValue(ResourceType type) -> int
GetPreview() -> Dictionary<ResourceType, int>
ApplyCargoDelivery(ShipCargo cargo) -> void
ApplyChanges(Dictionary<ResourceType, int> changes) -> void

Events:
- OnColonyStateChanged(MarsColonyState)
- OnPreviewUpdated(Dictionary<ResourceType, int>)
- OnGameOver(string reason)
```

### GameFlowManager
```csharp
RestartGame() -> void
EndGame(bool victory, string message) -> void

Properties:
- CurrentGameState (GameState)
- CurrentPhase (GamePhase)

Events:
- OnPhaseChanged(GamePhase)
- OnTurnChanged(int)
- OnGameEnded(bool victory, string message)
```

### EventManager
```csharp
LoadEvents(TextAsset jsonFile) -> void
GetNextEvent() -> TurnEvent
Reset() -> void
GetTotalEvents() -> int

Events:
- OnEventTriggered(TurnEvent)
```
